<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico">

    <title>james-irwin@github</title>

    <!-- Bootstrap core CSS -->
    <link href="../dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap theme -->
    <link href="../dist/css/bootstrap-theme.min.css" rel="stylesheet">

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-16765789-5', 'auto');
  ga('send', 'pageview');

</script>
  </head>

  <body role="document">

    <!-- Fixed navbar -->
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="https://james-irwin.github.io/#kanban">james-irwin@github</a>
        </div>
      </div>
    </nav>

    <div class="container theme-showcase" role="main">

      <!-- Main jumbotron for a primary marketing message or call to action -->
      <div class="jumbotron">
        <h1>getKanban scoreboard</h1>
        <p>Bristol City Council league</p>
      </div>

</head>
<body>

<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>
<div class="container theme-showcase" role="main">
<table class="table table-sm" id="scoresTable">
<thead>
<tr>
<th scope="col"> </th>
<th scope="col">Day 9</th>
<th scope="col">Day 12</th>
<th scope="col">Day 15</th>
<th scope="col">Day 18</th>
<th scope="col">Day 21</th>
<th scope="col">Latency trending</th>
<th scope="col">Latency distribution</th>
</tr>
</thead>
</table>
</div> <!-- container theme-showcase-->

<script>
var scores={

 "Kan\'tban":{
             "9" :{"subscribers":20,"profit":200},
             "12":{"subscribers":50,"profit":950},
             "15":{"subscribers":63,"profit":2210},
             "18":{"subscribers":106,"profit":8860},
             "leadtimes":{"1":1,"3":1,"5":3,"6":1,"8":4,"9":2,"10":3,"11":1},
             "runtimes":[8,8,6,10,9,8,5,9,9,10,3,10,1,11,10,5]
            },
  "Favourite Smell":{
             "9" :{"subscribers":20,"profit":200},
             "12":{"subscribers":36,"profit":740},
             "15":{"subscribers":63,"profit":2000},
             "18":{"subscribers":93,"profit":8325},
             "21":{"subscribers":108,"profit":14355},
             "leadtimes":{"8":2,"6":2,"10":4,"9":2,"11":3,"4":2,"3":2,"5":4,"1":3,"7":1},
             "runtimes":[8,8,6,10,9,11,4,5,3,5,10,11,11,1,5,10,4,6,3,1,9,7,1,5,10]
            },
  "The Early Birds":{
             "9" :{"subscribers":20,"profit":200},
             "12":{"subscribers":42,"profit":830},
             "15":{"subscribers":92,"profit":2670},
             "18":{"subscribers":157,"profit":10595},
             "21":{"subscribers":287,"profit":19205},
             "leadtimes":{"1":2,"2":5,"3":3,"4":3,"5":4,"6":3,"7":1,"8":3,"9":1,"10":3,"11":1,"13":1},
             "runtimes":[8,8,6,10,8,2,6,9,5,10,2,3,4,2,5,13,1,10,7,5,11,2,2,3,1,3,5,4,6,4 ]
            },
  "No Consensus":{
             "9" :{"subscribers":20,"profit":200},
             "12":{"subscribers":50,"profit":950},
             "15":{"subscribers":70,"profit":2350},
             "18":{"subscribers":129,"profit":9575},
             "21":{"subscribers":248,"profit":17015},
             "leadtimes":{"1":1,"2":5,"3":1,"4":5,"5":3,"6":3,"8":4,"9":1,"10":4,"12":1},
             "runtimes":[8,8,6,10,8,9,5,4,4,5,10,2,5,12,10,2,8,10,2,2,4,3,6,4,6,1,4,2]
            },
  "Sunny Side Up":{
             "9" :{"subscribers":20,"profit":200},
             "12":{"subscribers":36,"profit":740},
             "15":{"subscribers":94,"profit":2620},
             "18":{"subscribers":153,"profit":10445},
             "21":{"subscribers":217,"profit":16995},
             "leadtimes":{"2":6,"3":1,"4":2,"5":3,"6":3,"8":3,"9":1,"10":3,"12":1,"14":1},
             "runtimes":[8,8,6,10,9,5,8,10,4,6,4,5,2,2,12,14,2,3,2,2,2,10,5]
            },
  "Going Bananas":{
             "9" :{"subscribers":20,"profit":200},
             "12":{"subscribers":50,"profit":950},
             "15":{"subscribers":92,"profit":2790},
             "18":{"subscribers":110,"profit":9540},
             "21":{"subscribers":197,"profit":15450},
             "leadtimes":{"0":1,"1":1,"2":1,"4":2,"5":5,"6":5,"8":6,"9":2,"10":2,"15":1},
             "runtimes":[8,8,6,8,9,10,6,5,10,8,9,4,2,6,5,5,15,1,6,5,4,8,5,8,6,0]
            },
  "The Kannibals":{
             "9" :{"subscribers":20,"profit":200},
             "12":{"subscribers":30,"profit":950},
             "15":{"subscribers":61,"profit":2170},
             "18":{"subscribers":134,"profit":9520},
             "21":{"subscribers":251,"profit":17050},
             "leadtimes":{"0":1,"1":4,"2":2,"3":2,"4":4,"5":3,"6":4,"8":3,"9":2,"10":1,"11":1,"12":1, "14":0},
             "runtimes":[8,8,6,9,10,8,3,5,4,6,2,0,3,6,9,1,12,11,4,5,1,1,5,4,4,1,2,6]
            }

};
</script>

<script>
var runPlot=function(graph, data){
  var trace = {};
  var xs=[];
  var i;
  for (i in data) { xs.push(1+Number(i)); }
  trace.x=xs;
  trace.y=data;
  trace.type='scatter';
  trace.mode='lines';

  var layout = {
    autosize: false,
    width: 150,
    height: 80,
    margin: { t: 0, l:20, b:4, r:0 },
    yaxis: {dtick:5}
  };

  Plotly.plot(graph, [trace], layout, {displayModeBar:false} );
}

var distPlot=function(graph, data){
  var trace = {};
  var xs=[];
  var ys=[];
  var i;
  var ticks=[];

  for (i in data) {
   ticks.push(Number(i));
   for (var j = 1; j<=Number(data[i]); j++) { // Plot bars effectively
      xs.push(Number(i));
      ys.push(Number(j));
    }
  }

  trace.x=xs;
  trace.y=ys;
  trace.mode='markers';
  trace.type='scatter';

  var layout = {
    autosize: false,
    width: 150,
    height: 100,
    margin: { t: 0, l:0, b:22, r:0 },
    xaxis: {tickvals:ticks}
  };

  Plotly.plot(graph, [trace], layout, {displayModeBar:false} );
}
</script>

<script>
var table=document.getElementById('scoresTable');
var team='';
var teamNumber = 1;
for (team in scores) {
  var row = table.insertRow(teamNumber);

  console.log('inserting row for ' + team);

  var tname     = row.insertCell(0);
  var day9      = row.insertCell(1);
  var day12     = row.insertCell(2);
  var day15     = row.insertCell(3);
  var day18     = row.insertCell(4);
  var day21     = row.insertCell(5);
  var rungraph  = row.insertCell(6);
  var leadgraph = row.insertCell(7);
  tname.innerHTML   = team;
  day9.innerHTML    = 'Subs '  + scores[team]['9'].subscribers +
                    '<br>$' + scores[team]['9'].profit;
  if (typeof scores[team]['12'] != 'undefined') {
    day12.innerHTML   = 'Subs '  + scores[team]['12'].subscribers +
                        '<br>$' + scores[team]['12'].profit;
  }

  if (typeof scores[team]['15'] != 'undefined') {
    day15.innerHTML   = 'Subs '  + scores[team]['15'].subscribers +
                        '<br>$' + scores[team]['15'].profit;
  }

  if (typeof scores[team]['18'] != 'undefined') {
    day18.innerHTML   = 'Subs '  + scores[team]['18'].subscribers +
                        '<br>$' + scores[team]['18'].profit;
  }

  if (typeof scores[team]['21'] != 'undefined') {
    day21.innerHTML   = 'Subs '  + scores[team]['21'].subscribers +
                        '<br>$' + scores[team]['21'].profit;
  }

  runPlot(rungraph, scores[team].runtimes);
  distPlot(leadgraph, scores[team].leadtimes);

  teamNumber++;
}

</script>
</body>
</html>
